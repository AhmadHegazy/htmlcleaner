package org.htmlcleaner;

import junit.framework.TestCase;

public class ClosedTagReopenTest extends TestCase {

    /**
     * Tests that tag closed due to one of its children (when the child tag is not allowed to be inside parent) is then
     * reopened.
     */
    public void testSimple() {
        CleanerProperties properties = new CleanerProperties();
        properties.setOmitXmlDeclaration(true);
        properties.setOmitHtmlEnvelope(true);
        SimpleXmlSerializer serializer = new SimpleXmlSerializer(properties);
        String cleaned = serializer.getXmlAsString(properties,
                "<p>text1<table><tr><td>text2</td></tr></table>text3</p>", "UTF-8");
        assertEquals("<p>text1</p><table><tbody><tr><td>text2</td></tr></tbody></table><p>text3</p>", cleaned);
        cleaned = serializer.getXmlAsString(properties, "</p>text1", "UTF-8");
        assertEquals("text1", cleaned);
        cleaned = serializer.getXmlAsString(properties, "<p>text1<div>text2</div>text3</p>", "UTF-8");
        assertEquals("<p>text1</p><div>text2</div><p>text3</p>", cleaned);
        cleaned = serializer.getXmlAsString(properties, "<div>text1<p>text2</p>text3</div>", "UTF-8");
        assertEquals("<div>text1<p>text2</p>text3</div>", cleaned);
    }
}
